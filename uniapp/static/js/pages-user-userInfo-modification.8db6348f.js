(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-userInfo-modification"],{"1eac":function(t,a,i){var n=i("976f");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var e=i("4f06").default;e("5ee791ca",n,!0,{sourceMap:!1,shadowMode:!1})},"36f3":function(t,a,i){"use strict";var n=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"bg"},[i("div",{staticClass:"upload",on:{click:function(a){a=t.$handleEvent(a),t.upload(a)}}},[i("v-uni-image",{staticClass:"upload-img",attrs:{src:t.myInfo.imgurl}})],1),i("div",{staticClass:"upload-txt"},[t._v("上传图片")]),i("div",{staticClass:"modifica-from"},[i("div",{staticClass:"modifica-input"},[i("span",[t._v("姓名")]),i("v-uni-input",{staticClass:"uni-input",attrs:{placeholder:"请输入真实姓名"},model:{value:t.myInfo.name,callback:function(a){t.$set(t.myInfo,"name",a)},expression:"myInfo.name"}})],1),i("div",{staticClass:"modifica-input"},[i("span",[t._v("电话")]),i("v-uni-input",{staticClass:"uni-input",attrs:{placeholder:"请输入电话号码"},model:{value:t.myInfo.phone,callback:function(a){t.$set(t.myInfo,"phone",a)},expression:"myInfo.phone"}})],1),i("div",{staticClass:"modifica-input"},[i("span",[t._v("职务")]),i("v-uni-input",{staticClass:"uni-input",attrs:{placeholder:"请输入您的职务"},model:{value:t.myInfo.job,callback:function(a){t.$set(t.myInfo,"job",a)},expression:"myInfo.job"}})],1),i("div",{staticClass:"modifica-input"},[i("span",[t._v("地址")]),i("v-uni-input",{staticClass:"uni-input",attrs:{placeholder:"请输入联系地址"},model:{value:t.myInfo.address,callback:function(a){t.$set(t.myInfo,"address",a)},expression:"myInfo.address"}})],1),i("v-uni-button",{staticClass:"modifica-btn",attrs:{type:"primary"},on:{click:function(a){a=t.$handleEvent(a),t.submit(a)}}},[t._v("提交")])],1)])},e=[];i.d(a,"a",function(){return n}),i.d(a,"b",function(){return e})},5132:function(t,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n={data:function(){return{myCard:{name:"",phone:"",add:""},base64:"",imgurl:"",myInfo:{}}},methods:{upload:function(){var t=this.getStr("uid"),a=this.getStr("verif"),i=this;uni.chooseImage({count:6,sizeType:["compressed"],sourceType:["album"],success:function(n){i.myInfo.imgurl=n.tempFilePaths[0],i.imgToBase64(i.myInfo.imgurl,function(n){i.base64=n;uni.uploadFile({url:"http://www.zwrhy.net/index/index/upImagesBase64/uid/"+t+"/verif/"+a,filePath:i.myInfo.imgurl,name:"file",formData:{data:i.base64},success:function(t){var a=t.data.length-2;i.imgurl=t.data.substring(t.data.indexOf("/"),a),i.imgurl=i.imgurl.replace(/\\/g,""),console.log("图片上传"+i.imgurl)}})})},catch:function(t){console.log(t)}})},getuploadImg:function(){},submit:function(){var t=this,a=this.getStr("uid"),i=this.getStr("verif");if(this.imgurl)if(this.myInfo.name)if(this.myInfo.phone)if(this.myInfo.job)if(this.myInfo.address){var n=/^1[34578]\d{9}$/,e=/^[\u4e00-\u9fa5]{2,20}$/,s=/^[\u4e00-\u9fa5]{2,20}$/;if(e.test(this.myInfo.name))if(n.test(this.myInfo.phone))if(s.test(this.myInfo.job)){var o={imgurl:this.imgurl,name:this.myInfo.name,phone:this.myInfo.phone,job:this.myInfo.job,address:this.myInfo.address},u="/index/Index/cardEdit/uid/"+a+"/verif/"+i;this.https(u,o).then(function(a){t.showToast("修改成功","success"),setTimeout(function(){uni.reLaunch({url:"./myCard"})},2e3)})}else this.showToast("请输入正确的职务");else this.showToast("请输入正确的电话");else this.showToast("请输入正确的中文名")}else this.showToast("地址不能为空");else this.showToast("职务不能为空");else this.showToast("电话不能为空");else this.showToast("姓名不能为空");else this.showToast("请上传头像")},imgToBase64:function(t,a,i){var n=document.createElement("CANVAS"),e=n.getContext("2d"),s=new Image;s.crossOrigin="Anonymous",s.onload=function(){n.height=s.height,n.width=s.width,e.drawImage(s,0,0);var t=n.toDataURL(i||"image/png");a.call(this,t),n=null},s.src=t},getmyInfo:function(){var t=this,a=this.getStr("uid"),i=this.getStr("verif");if(a&&i){var n="/index/Index/card/uid/"+a+"/verif/"+i;this.http(n).then(function(a){1==a.status?t.myInfo=a.data:t.myInfo={imgurl:"../../../static/image/login/upload.png",name:"",phone:"",job:"",address:""}})}}},created:function(){this.getmyInfo()},onNavigationBarButtonTap:function(){uni.redirectTo({url:"./myCard"})}};a.default=n},"6fa3":function(t,a,i){"use strict";i.r(a);var n=i("5132"),e=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(a,t,function(){return n[t]})}(s);a["default"]=e.a},"976f":function(t,a,i){a=t.exports=i("2350")(),a.push([t.i,".bg[data-v-314814aa]{position:fixed;top:0;left:0;width:100%;height:100%;padding-top:%?88?%;background:#f2f2f2}.upload[data-v-314814aa]{background:#fff;border:solid #ebebeb;margin:%?40?% auto 0}.upload[data-v-314814aa],.upload-img[data-v-314814aa]{width:%?300?%;height:%?300?%}.avatar[data-v-314814aa]{width:%?280?%;height:%?280?%;margin:%?10?%}.upload-txt[data-v-314814aa]{width:100%;font-size:%?28?%;line-height:%?100?%;text-align:center}.modifica-from[data-v-314814aa]{overflow:hidden;text-align:center;padding:%?50?%}.modifica-input[data-v-314814aa]{display:-webkit-flex;display:-ms-flexbox;display:flex;border-bottom:solid #ebebeb;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;margin:%?40?% %?20?%}.modifica-input span[data-v-314814aa]{font-size:%?24?%;line-height:%?80?%;margin-left:%?20?%}.modifica-input uni-input[data-v-314814aa]{width:80%;height:%?80?%;text-align:left;font-size:%?24?%;padding:0 0 0 %?30?%}.modifica-btn[data-v-314814aa]{background:#1dae1c;margin-top:%?60?%}",""])},b60b:function(t,a,i){"use strict";i.r(a);var n=i("36f3"),e=i("6fa3");for(var s in e)"default"!==s&&function(t){i.d(a,t,function(){return e[t]})}(s);i("fa9d");var o=i("2877"),u=Object(o["a"])(e["default"],n["a"],n["b"],!1,null,"314814aa",null);a["default"]=u.exports},fa9d:function(t,a,i){"use strict";var n=i("1eac"),e=i.n(n);e.a}}]);